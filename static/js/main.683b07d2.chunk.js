(this.webpackJsonpcigo=this.webpackJsonpcigo||[]).push([[0],{229:function(e,a,t){e.exports=t(418)},417:function(e,a,t){},418:function(e,a,t){"use strict";t.r(a);var n=t(1),r=t.n(n),i=t(15),c=t.n(i),u=t(11),l=t(463),o=t(466),s=t(190),p=t(469),m=t(454),f=t(462),v=t(31),h=t.n(v),d=t(65),b=t(18),P=t(113),E=t(420),x=t(468),k=t(457),w=t(465),j=t(459),O=t(421),g=t(460),y=t(461),C=t(471),T=t(467),L=t(116),A=t.n(L),D=t(46),V=Object(m.a)({fab:{margin:0,top:"auto",right:20,bottom:20,left:"auto",position:"fixed"},paper:{padding:15}});function I(e){var a=Object(C.a)({limit:25,ignoreCase:!0,ignoreAccents:!0});return r.a.createElement(T.a,{defaultValue:e.defaultValue.label,options:e.list.map((function(e){return e.label})),onInputChange:e.handleChange,selectOnFocus:!0,handleHomeEndKeys:!0,freeSolo:!0,filterOptions:a,renderInput:function(a){return r.a.createElement(w.a,Object.assign({},a,{label:e.label,variant:"outlined",InputProps:Object(P.a)(Object(P.a)({},a.InputProps),{},{startAdornment:r.a.createElement(j.a,{position:"end"},r.a.createElement(A.a,null))})}))}})}function S(e){var a;if(e.rainLevel>0){var t;switch(e.rainLevel){case 1:t="faible";break;case 2:t="mod\xe9r\xe9e";break;case 3:t="forte";break;default:t="torrentielle"}a="Attention pluie ".concat(t," pr\xe9vue dans ").concat(e.timeBeforeRain," minutes ! \ud83c\udf27\ufe0f")}else a="Vous pouvez sortir sans risque ! \ud83d\ude0e";return e.rainLevel>-1?r.a.createElement(O.a,{variant:"h2",component:"h1",gutterBottom:!0},a):null}function M(e){var a=function(e){var a,t=e.x,n=e.y;switch(e.payload.value){case 0:a="Pas de Pluie";break;case 1:a="Faible";break;case 2:a="Mod\xe9r\xe9e";break;case 3:a="Forte";break;default:a="Pas d'info"}return r.a.createElement("g",{transform:"translate(".concat(t,",").concat(n,")")},r.a.createElement("text",{x:0,y:0,dy:0,textAnchor:"end",fill:"#666"},a))},t=function(e){var a;if(e&&e.payload&&e.payload.length)switch((null===e||void 0===e?void 0:e.payload[0].payload).niveauPluie){case 0:a="Pas de pluie pr\xe9vue.";break;case 1:a="Pluie faible pr\xe9vue.";break;case 2:a="Pluie mod\xe9r\xe9e pr\xe9vue.";break;case 3:a="Pluie forte pr\xe9vue.";break;default:a="Pluie torrentielle pr\xe9vue."}return r.a.createElement(g.a,null,r.a.createElement(y.a,null,r.a.createElement(O.a,{variant:"body1"},a)))};return r.a.createElement(D.c,{width:"100%",height:200},r.a.createElement(D.b,{height:200,width:500,data:e.chartData},r.a.createElement(D.a,{type:"monotone",dataKey:"niveauPluie",stroke:"#3f51b5",fill:"#3f51b5",isAnimationActive:!0}),r.a.createElement(D.e,{dataKey:"hours"}),r.a.createElement(D.f,{width:90,tickMargin:5,ticks:[0,1,2,3],tick:r.a.createElement(a,null)}),r.a.createElement(D.d,{content:r.a.createElement(t,null)})))}var B=function(e){var a=V();return r.a.createElement(r.a.Fragment,null,r.a.createElement(o.a,{display:"flex",flexDirection:"column"},r.a.createElement(o.a,{my:1},r.a.createElement(E.a,{className:a.paper,elevation:3},r.a.createElement(I,{list:e.searchCityList,defaultValue:e.searchDefaultValue,inputValue:e.searchInputValue,handleChange:e.searchHandleChange,label:"Ville"}))),r.a.createElement(o.a,{my:1},r.a.createElement(E.a,{className:a.paper,elevation:3},r.a.createElement(S,{rainLevel:e.rainLevel,timeBeforeRain:e.timeBeforeRain}))),r.a.createElement(o.a,{my:1},r.a.createElement(E.a,{className:a.paper,elevation:3},r.a.createElement(M,{chartData:e.chartData}))),r.a.createElement(x.a,{mdUp:!0},r.a.createElement(k.a,{color:"primary","aria-label":"search",className:a.fab,onClick:e.fabHandleClick},r.a.createElement(A.a,null)))))},H=t(117);H.setLevel("error");var F=H;var N=function(e){var a={label:"Rennes",id:352380},t=Object(n.useState)(a),i=Object(b.a)(t,2),c=i[0],u=i[1],l=Object(n.useState)(c),o=Object(b.a)(l,2),s=o[0],p=o[1],m=Object(n.useState)([]),f=Object(b.a)(m,2),v=f[0],P=f[1],E=Object(n.useState)(-1),x=Object(b.a)(E,2),k=x[0],w=x[1],j=Object(n.useState)(),O=Object(b.a)(j,2),g=O[0],y=O[1],C=Object(n.useState)([]),T=Object(b.a)(C,2),L=T[0],A=T[1];Object(n.useEffect)((function(){function e(){return(e=Object(d.a)(h.a.mark((function e(a){var t;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,V(a);case 3:t=e.sent,P(t),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),F.error(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}2!==c.label.length&&c.label!==a.label||function(a){e.apply(this,arguments)}(c.label)}),[c,a.label]);var D=Object(n.useCallback)(function(){var e=Object(d.a)(h.a.mark((function e(a){var t,n,r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,S(a);case 3:t=e.sent,(n=t.find((function(e){return e.niveauPluie>0})))?(r=5*t.indexOf(n),w(n.niveauPluie),y(r)):w(0),A(t),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),F.error(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(a){return e.apply(this,arguments)}}(),[]);function V(e){return I.apply(this,arguments)}function I(){return(I=Object(d.a)(h.a.mark((function e(a){var t,n,r,i;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="".concat("https://cors-anywhere.herokuapp.com","/http://www.meteofrance.com/mf3-rpc-portlet/rest/lieu/facet/pluie/search"),e.next=3,fetch("".concat(t,"/").concat(a));case 3:if(!(n=e.sent).ok){e.next=12;break}return e.next=7,n.json();case 7:return r=e.sent,i=r.map((function(e){var a=e.nomAffiche.split(" ");return a.length>1&&(a.pop(),a=a.join(" ")),{label:a,id:e.id}})),e.abrupt("return",i);case 12:throw new Error("Can't Fetch Search API");case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function S(e){return M.apply(this,arguments)}function M(){return(M=Object(d.a)(h.a.mark((function e(a){var t,n,r,i;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=function(e){var a=e.niveauPluieText[0].split(" ")[0],t=a[2]+a[3],n=a[5]+a[6],r=new Date;r.setHours(t),r.setMinutes(n);var i=e.dataCadran;return i=i.map((function(e,a){var t={};0===e.niveauPluie?t.niveauPluie=null:t.niveauPluie=e.niveauPluie-1;var n,i=new Date(r.getTime());return i.setTime((n=5*a,r.getTime()+60*n*1e3)),t.hours="".concat(i.getHours(),":").concat((i.getMinutes()<10?"0":"")+i.getMinutes()),t}))},t="".concat("https://cors-anywhere.herokuapp.com","/http://www.meteofrance.com/mf3-rpc-portlet/rest/pluie"),e.next=4,fetch("".concat(t,"/").concat(a));case 4:if(!(n=e.sent).ok){e.next=12;break}return e.next=8,n.json();case 8:return r=e.sent,e.abrupt("return",i(r));case 12:throw new Error("Can't Fetch Meteo API");case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(n.useEffect)((function(){document.title="".concat(s.label),D(s.id)}),[s,D]),r.a.createElement(B,{searchDefaultValue:a,searchInputValue:c,searchCityList:v,searchHandleChange:function(e,a){var t=v.find((function(e){return e.label.toLowerCase()===a.toLowerCase()}));t?(u(t),p(t)):u({label:a})},rainLevel:k,timeBeforeRain:g,chartData:L,fabHandleClick:function(){document.getElementsByClassName("MuiAutocomplete-input")[0].focus(),A([{hours:"15:00",niveauPluie:1,niveauPluieText:"Pas de pr\xe9cipitations"},{hours:"15:05",niveauPluie:1,niveauPluieText:"Pas de pr\xe9cipitations"},{hours:"15:10",niveauPluie:1,niveauPluieText:"Pas de pr\xe9cipitations"},{hours:"15:15",niveauPluie:1,niveauPluieText:"Pas de pr\xe9cipitations"},{hours:"15:20",niveauPluie:1,niveauPluieText:"Pas de pr\xe9cipitations"},{hours:"15:25",niveauPluie:1,niveauPluieText:"Pas de pr\xe9cipitations"},{hours:"15:30",niveauPluie:null,niveauPluieText:"Pas de pr\xe9cipitations"},{hours:"15:35",niveauPluie:1,niveauPluieText:"Pas de pr\xe9cipitations"},{hours:"15:40",niveauPluie:4,niveauPluieText:"Pr\xe9cipitations fortes"},{hours:"15:45",niveauPluie:1,niveauPluieText:"Pas de pr\xe9cipitations"},{hours:"15:50",niveauPluie:0,niveauPluieText:"Donn\xe9es indisponibles"},{hours:"15:55",niveauPluie:1,niveauPluieText:"Pas de pr\xe9cipitations"}]),w(3),y(15)}})},R=Object(s.a)();R=Object(p.a)(R);var K=Object(m.a)((function(e){var a;return{root:(a={},Object(u.a)(a,e.breakpoints.down("sm"),{marginTop:0}),Object(u.a)(a,e.breakpoints.up("md"),{marginTop:48}),a)}}));var J=function(){var e=K();return r.a.createElement(f.a,{theme:R},r.a.createElement(l.a,{maxWidth:!1},r.a.createElement(o.a,{className:e.root},r.a.createElement(l.a,{component:"main",maxWidth:"md"},r.a.createElement(N,null)))))},W=t(464);t(417);c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(W.a,null),r.a.createElement(J,null)),document.getElementById("root"))}},[[229,1,2]]]);
//# sourceMappingURL=main.683b07d2.chunk.js.map