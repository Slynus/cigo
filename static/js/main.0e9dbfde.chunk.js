(this.webpackJsonpcigo=this.webpackJsonpcigo||[]).push([[0],{228:function(e,t,a){e.exports=a(417)},416:function(e,t,a){},417:function(e,t,a){"use strict";a.r(t);var n=a(1),i=a.n(n),r=a(15),u=a.n(r),c=a(460),l=a(463),o=a(189),s=a(466),p=a(459),h=a(29),v=a.n(h),m=a(64),P=a(19),f=a(113),d=a(465),b=a(455),x=a(462),E=a(458),T=a(419),w=a(468),g=a(464),j=a(116),O=a.n(j),y=a(452),k=a(39),C=Object(y.a)({fab:{margin:0,top:"auto",right:20,bottom:20,left:"auto",position:"fixed"}});function D(e){var t=Object(w.a)({limit:25,ignoreCase:!0,ignoreAccents:!0});return i.a.createElement(g.a,{defaultValue:e.defaultValue.label,options:e.list.map((function(e){return e.label})),onInputChange:e.handleChange,selectOnFocus:!0,handleHomeEndKeys:!0,freeSolo:!0,filterOptions:t,renderInput:function(t){return i.a.createElement(x.a,Object.assign({},t,{label:e.label,variant:"outlined",InputProps:Object(f.a)(Object(f.a)({},t.InputProps),{},{startAdornment:i.a.createElement(E.a,{position:"end"},i.a.createElement(O.a,null))})}))}})}function V(e){return i.a.createElement(T.a,{variant:"h1",component:"h1",gutterBottom:!0},e.text)}function I(e){return i.a.createElement(k.d,{width:"100%",height:200},i.a.createElement(k.c,{height:200,width:500,data:e.chartData},i.a.createElement(k.b,{type:"monotone",dataKey:"niveauPluie",stroke:"#8884d8",isAnimationActive:!1}),i.a.createElement(k.f,{dataKey:"hours"}),i.a.createElement(k.g,{tickMargin:25}),i.a.createElement(k.a,{stroke:"#ccc"}),i.a.createElement(k.e,null)))}var A=function(e){var t=C();return i.a.createElement(i.a.Fragment,null,i.a.createElement(l.a,{display:"flex",flexDirection:"column"},i.a.createElement(l.a,{my:1},i.a.createElement(D,{list:e.searchCityList,defaultValue:e.searchDefaultValue,inputValue:e.searchInputValue,handleChange:e.searchHandleChange,label:"Ville"})),i.a.createElement(l.a,{my:1},i.a.createElement(V,{text:e.meteoText})),i.a.createElement(l.a,{my:1},i.a.createElement(I,{chartData:e.chartData})),i.a.createElement(d.a,{mdUp:!0},i.a.createElement(b.a,{color:"primary","aria-label":"search",className:t.fab,onClick:e.fabHandleClick},i.a.createElement(O.a,null)))))},S=a(117);S.setLevel("error");var H=S,M=[{hours:"15:00",niveauPluie:1,niveauPluieText:"Pas de pr\xe9cipitations"},{hours:"15:05",niveauPluie:2,niveauPluieText:"Pr\xe9cipitations faibles"},{hours:"15:10",niveauPluie:3,niveauPluieText:"Pr\xe9cipitations mod\xe9r\xe9es"},{hours:"15:15",niveauPluie:3,niveauPluieText:"Pr\xe9cipitations mod\xe9r\xe9es"},{hours:"15:20",niveauPluie:2,niveauPluieText:"Pr\xe9cipitations faibles"},{hours:"15:25",niveauPluie:4,niveauPluieText:"Pas de pr\xe9cipitations"},{hours:"15:30",niveauPluie:null,niveauPluieText:"Pas de pr\xe9cipitations"},{hours:"15:35",niveauPluie:1,niveauPluieText:"Pas de pr\xe9cipitations"},{hours:"15:40",niveauPluie:4,niveauPluieText:"Pr\xe9cipitations fortes"},{hours:"15:45",niveauPluie:1,niveauPluieText:"Pas de pr\xe9cipitations"},{hours:"15:50",niveauPluie:0,niveauPluieText:"Donn\xe9es indisponibles"},{hours:"15:55",niveauPluie:1,niveauPluieText:"Pas de pr\xe9cipitations"}],L=[{hours:"15:00",niveauPluie:1,niveauPluieText:"Pas de pr\xe9cipitations"},{hours:"15:05",niveauPluie:1,niveauPluieText:"Pas de pr\xe9cipitations"},{hours:"15:10",niveauPluie:1,niveauPluieText:"Pas de pr\xe9cipitations"},{hours:"15:15",niveauPluie:1,niveauPluieText:"Pas de pr\xe9cipitations"},{hours:"15:20",niveauPluie:1,niveauPluieText:"Pas de pr\xe9cipitations"},{hours:"15:25",niveauPluie:1,niveauPluieText:"Pas de pr\xe9cipitations"},{hours:"15:30",niveauPluie:null,niveauPluieText:"Pas de pr\xe9cipitations"},{hours:"15:35",niveauPluie:1,niveauPluieText:"Pas de pr\xe9cipitations"},{hours:"15:40",niveauPluie:4,niveauPluieText:"Pr\xe9cipitations fortes"},{hours:"15:45",niveauPluie:1,niveauPluieText:"Pas de pr\xe9cipitations"},{hours:"15:50",niveauPluie:0,niveauPluieText:"Donn\xe9es indisponibles"},{hours:"15:55",niveauPluie:1,niveauPluieText:"Pas de pr\xe9cipitations"}];var F=function(e){var t={label:"Rennes",id:352380},a=Object(n.useState)(t),r=Object(P.a)(a,2),u=r[0],c=r[1],l=Object(n.useState)(u),o=Object(P.a)(l,2),s=o[0],p=o[1],h=Object(n.useState)([]),f=Object(P.a)(h,2),d=f[0],b=f[1],x=Object(n.useState)(),E=Object(P.a)(x,2),T=E[0],w=E[1],g=Object(n.useState)(M),j=Object(P.a)(g,2),O=j[0],y=j[1];Object(n.useEffect)((function(){function e(){return(e=Object(m.a)(v.a.mark((function e(t){var a;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,C(t);case 3:a=e.sent,b(a),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),H.error(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}2!==u.label.length&&u.label!==t.label||function(t){e.apply(this,arguments)}(u.label)}),[u,t.label]);var k=Object(n.useCallback)(function(){var e=Object(m.a)(v.a.mark((function e(t){var a;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,V(t);case 3:(a=e.sent)[0][1]>1?w("Attention pluie pr\xe9vue ! \ud83c\udf27\ufe0f"):w("Vous pouvez sortir sans risque ! \ud83d\ude0e"),y(a[1]),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),H.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),[]);function C(e){return D.apply(this,arguments)}function D(){return(D=Object(m.a)(v.a.mark((function e(t){var a,n,i,r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a="".concat("https://cors-anywhere.herokuapp.com","/http://www.meteofrance.com/mf3-rpc-portlet/rest/lieu/facet/pluie/search"),e.next=3,fetch("".concat(a,"/").concat(t));case 3:if(!(n=e.sent).ok){e.next=12;break}return e.next=7,n.json();case 7:return i=e.sent,r=i.map((function(e){var t=e.nomAffiche.split(" ");return t.length>1&&(t.pop(),t=t.join(" ")),{label:t,id:e.id}})),e.abrupt("return",r);case 12:throw new Error("Can't Fetch Search API");case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function V(e){return I.apply(this,arguments)}function I(){return(I=Object(m.a)(v.a.mark((function e(t){var a,n,i,r,u,c;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=function(e){var t=e.niveauPluieText[0].split(" ")[0],a=t[2]+t[3],n=t[5]+t[6],i=new Date;i.setHours(a),i.setMinutes(n);var r=e.dataCadran;return r=r.map((function(e,t){var a={};0===e.niveauPluie?a.niveauPluie=null:a.niveauPluie=e.niveauPluie-1;var n,r=new Date(i.getTime());return r.setTime((n=5*t,i.getTime()+60*n*1e3)),a.hours="".concat(r.getHours(),":").concat((r.getMinutes()<10?"0":"")+r.getMinutes()),a}))},a="".concat("https://cors-anywhere.herokuapp.com","/http://www.meteofrance.com/mf3-rpc-portlet/rest/pluie"),e.next=4,fetch("".concat(a,"/").concat(t));case 4:if(!(n=e.sent).ok){e.next=14;break}return e.next=8,n.json();case 8:return i=e.sent,r=i.dataCadran.map((function(e){return e.niveauPluie})),u=c(i),e.abrupt("return",[r,u]);case 14:throw new Error("Can't Fetch Meteo API");case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(n.useEffect)((function(){document.title="".concat(s.label),k(s.id)}),[s,k]),i.a.createElement(A,{searchDefaultValue:t,searchInputValue:u,searchCityList:d,searchHandleChange:function(e,t){var a=d.find((function(e){return e.label.toLowerCase()===t.toLowerCase()}));a?(c(a),p(a)):c({label:t})},meteoText:T,chartData:O,fabHandleClick:function(){H.debug("\xe9_\xe9"),y(L)}})},K=Object(o.a)();K=Object(s.a)(K);var B=function(){return i.a.createElement(p.a,{theme:K},i.a.createElement(c.a,{maxWidth:!1},i.a.createElement(l.a,{my:6},i.a.createElement(c.a,{component:"main",maxWidth:"md"},i.a.createElement(F,null)))))},J=a(461);a(416);u.a.render(i.a.createElement(i.a.StrictMode,null,i.a.createElement(J.a,null),i.a.createElement(B,null)),document.getElementById("root"))}},[[228,1,2]]]);
//# sourceMappingURL=main.0e9dbfde.chunk.js.map